Resources:
  CreateGiftQueuePolicy:
    Type: AWS::SQS::QueuePolicy
    Properties:
      PolicyDocument:
        Statement:
          - Effect: Allow
            Action:
              - SQS:*
            Resource: !GetAtt CreateGiftQueue.Arn
            Principal:
              AWS:
                - !Ref AWS::AccountId
          - Effect: Allow
            Principal:
              AWS:
                - '*'
            Action:
              - SQS:SendMessage
            Resource: !GetAtt CreateGiftQueue.Arn
            Condition:
              ArnLike:
                aws:SourceArn:
                  - !Ref ClientCreatedTopic
      Queues:
        - !Ref CreateGiftQueue
  UpdateGiftQueuePolicy:
    Type: AWS::SQS::QueuePolicy
    Properties:
      PolicyDocument:
        Statement:
          - Effect: Allow
            Action:
              - SQS:*
            Resource: !GetAtt UpdateGiftQueue.Arn
            Principal:
              AWS:
                - !Ref AWS::AccountId
          - Effect: Allow
            Principal:
              AWS:
                - '*'
            Action:
              - SQS:SendMessage
            Resource: !GetAtt UpdateGiftQueue.Arn
            Condition:
              ArnLike:
                aws:SourceArn:
                  - !Ref ClientUpdatedTopic
      Queues:
        - !Ref UpdateGiftQueue
